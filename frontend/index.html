<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroTech - Tratores e Suprimentos</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>

    <!-- Header -->
    <header>
        <div class="navbar">
            <div class="logo">Agro<span>Tech</span></div>
            <ul class="nav-links">
                <li><a href="index.html" class="active">Home</a></li>
                <li><a href="quem-somos.html">Quem Somos</a></li>
                <li><a href="produtos.html">Tratores</a></li>
                <!-- <li><a href="pecas.html">Peças</a></li> -->
                <li><a href="servicos.html">Serviços</a></li>
                <li><a href="contatos.html">Contatos</a></li>
                <li><a href="login.html" class="btn-login">Login</a></li>
            </ul>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <h1>Potência para o seu Campo</h1>
        <p>Soluções completas em maquinário agrícola e suprimentos para maximizar sua produtividade.</p>
        <a href="produtos.html" class="btn-cta">Ver Produtos</a>
    </section>

    <!-- Featured Products -->
    <section class="container">
        <h2 class="section-title">Destaques</h2>
        <div class="products-grid" id="featuredProducts">
            <div class="loading" style="text-align: center; width: 100%; grid-column: 1 / -1;">
                <i class="fas fa-spinner fa-spin"></i> Carregando destaques...
            </div>
        </div>
    </section>

    <!-- About Teaser -->
    <section class="about-teaser">
        <div class="about-content">
            <div class="about-image">
                <img src="https://images.unsplash.com/photo-1625246333195-78d9c38ad449?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80"
                    alt="Nossa Fazenda">
            </div>
            <div class="about-text">
                <h2 class="section-title" style="text-align: left; margin-bottom: 20px;">Quem Somos</h2>
                <p style="margin-bottom: 20px;">A AgroTech é líder no fornecimento de soluções agrícolas de alta
                    performance. Com mais de 20 anos de experiência, conectamos o produtor rural às melhores tecnologias
                    do mercado.</p>
                <p style="margin-bottom: 30px;">Nossa missão é impulsionar o agronegócio brasileiro com máquinas
                    robustas, peças genuínas e suporte técnico especializado.</p>
                <a href="quem-somos.html" class="btn-cta">Conheça Nossa História</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-col">
                <h3>AgroTech</h3>
                <p>Soluções completas para o homem do campo. Tratores, peças e serviços com a qualidade que você confia.
                </p>
                <div class="social-links">
                    <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="footer-col">
                <h3>Links Rápidos</h3>
                <ul class="footer-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="quem-somos.html">Quem Somos</a></li>
                    <li><a href="produtos.html">Tratores</a></li>
                    <li><a href="contatos.html">Contatos</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Contato</h3>
                <ul class="footer-links">
                    <li><i class="fas fa-map-marker-alt"></i> Av. Tutunas, 1000 - MG</li>
                    <li><i class="fas fa-phone"></i> (34) 99112-3456</li>
                    <li><i class="fas fa-envelope"></i> contato@agrotech.com.br</li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            &copy; 2025 AgroTech - Todos os direitos reservados.
        </div>
    </footer>

    <script>
        const API_URL = "https://javaoo-3.onrender.com/api";
        const featuredContainer = document.getElementById('featuredProducts');

        fetch(API_URL + "/produtos")
            .then(res => res.json())
            .then(products => {
                // Get top 3 products
                const featured = products.slice(0, 3);

                if (featured.length > 0) {
                    featuredContainer.innerHTML = "";

                    featured.forEach(p => {
                        let categoriaNome = "Geral";
                        if (p.categoria) {
                            if (typeof p.categoria === 'object' && p.categoria.nome) {
                                categoriaNome = p.categoria.nome;
                            } else if (typeof p.categoria === 'string') {
                                categoriaNome = p.categoria;
                            }
                        }

                        const fotoUrl = p.foto ? `${API_URL}/produtos/${p.id}/foto` : 'https://via.placeholder.com/300x200?text=Sem+Foto';

                        featuredContainer.innerHTML += `
                            <div class="product-card">
                                <img src="${fotoUrl}" alt="${p.nome}" class="product-img" onerror="this.src='https://via.placeholder.com/300x200?text=Erro+Foto'">
                                <div class="product-info">
                                    <div class="product-category">${categoriaNome}</div>
                                    <h3 class="product-title">${p.nome}</h3>
                                    <div class="product-price">R$ ${parseFloat(p.preco).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</div>
                                    <a href="detalhes.html?id=${p.id}" class="btn-details">Mais Detalhes</a>
                                </div>
                            </div>
                        `;
                    });
                } else {
                    featuredContainer.innerHTML = "<p style='text-align:center; width:100%;'>Nenhum destaque disponível no momento.</p>";
                }
            })
            .catch(err => {
                console.error("Erro ao carregar destaques:", err);
                featuredContainer.innerHTML = "<p style='text-align:center; width:100%;'>Não foi possível carregar os destaques.</p>";
            });
    </script>

</body>

</html>